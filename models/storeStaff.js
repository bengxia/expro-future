var mysql = require('../libs/mysql.js');var SimpleDO = require('../libs/simpleDO');function create() {    return new StoreStaff();};function StoreStaff() {    this.table = 'ef_store_staff';};StoreStaff.prototype = new SimpleDO('ef_store_staff');//StoreStaff.prototype.findOne = function(opt, cb) {//    where = "";//    for(var k in opt) {//        var value = opt[k];//        if(typeof value != 'object' && typeof value != 'array') {//            if( typeof value == 'number') {//                where += " AND " + k + " = " + value;//            }//            else {//                where += " AND " + k + " LIKE  '" + value + "'";//            }//        }//    }////    var sql = "SELECT * FROM `ef_store_staff` WHERE 1=1"+where;//    mysql.query(sql, function(err, rs) {//        if(err) return cb(err);//        if(!rs.length) return cb(err);//        cb(err, rs[0]);//    });//};/** * 查询所有的数据 * @param opt 参数，包含：opt.where， opt.sidx， opt.sord， opt.start ， opt.limit; * @param cb 回调 */StoreStaff.prototype.findAll = function(opt, cb) {    var sql = " SELECT * FROM ef_store_staff  "        +" where 1=1 "+ opt.where;    if(opt.bt) sql += " and create_time >= "+ opt.bt;    if(opt.et) sql += " and create_time <= "+ opt.et;    if(opt.sidx && opt.sord) sql += " ORDER BY "+opt.sidx+" "+opt.sord;    if(opt.limit && opt.start) sql += " LIMIT "+ opt.start + " , "+opt.limit;    mysql.query(sql, function(err, rs) {        if(err) return cb(err);        if(!rs.length) return cb(err);        cb(err, rs);    });};/** * 创建 * @param body 前台传入的页面提交数据对象 * @param cb 回调 */StoreStaff.prototype.create = function(body, cb) {    var opt = {        table: 'ef_store_staff',        fields: body    };    mysql.insert(opt, function(err, info) {        if(err) return next(err);        return cb(err, info);    });};/** * 删除一批数据 * @param ids 员工的序号，可以为多个以','号分隔，例如：01,02,03 * @param cb 回调 */StoreStaff.prototype.delete = function(ids, cb) {    var sql = " delete from ef_store_staff where _id in(" + ids + ") ";    mysql.query(sql, function(err, rs) {        if(err) return cb(err);        cb(err, rs);    });};/** * 更新 * @param body 前台传入的页面提交数据对象 * @param cb 回调 */StoreStaff.prototype.update = function(body, cb) {    var opt = {        table: 'ef_store_staff',        fields: body    };    mysql.update(opt, function(err, info) {        if(err) return next(err);        return cb(err, info);    });};exports = module.exports = create;