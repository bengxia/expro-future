//设置前台页面显示的表格列头var colNames = ['编号', '交易单号', '商品名称','交易数量','单价','总价'];//设置前台页面显示的表格数据var colModel = [    {name:'_id',index:'_id', width:100, align:'center',sortable:true},    {name:'deal_id',index:'deal_id', width:200, align:'center',sortable:false},    {name:'goods_name',index:'goods_name', width:200, align:'center',sortable:false},    {name:'num',index:'num', width:200, align:'center',sortable:true},    {name:'closing_cost',index:'closing_cost', width:200, align:'center',sortable:true},    {name:'total_cost',index:'total_cost', width:200,align:'center',sortable:true}];//设置前台页面所要显示的数据字段,用于数据筛选var showElement = getShowElement();//同上function getShowElement(){    var ar = new Array();    for(var i=0; i<colModel.length; i++){        ar[i] = colModel[i].name;    }    return ar;}var jsonCondition = {};function search() {    jsonCondition = array2Json(jQuery("#frmSearchCustomer").serializeArray());    jQuery("#list").trigger("reloadGrid");}//按钮事件Start$(function(){    jQuery("#list").jqGrid({        url:'/deal/'+$('#_id').val()+"?isWeb=1",        datatype: "json",        mtype: 'GET',        colNames:colNames,        colModel:colModel,        gridview:true, //加速显示        multiselect: true,  //可多选，出现多选框        multiselectWidth: 25, //设置多选列宽度        rowNum:10,        rowList:[10,20,30],        pager: '#pager',        sortname: 'total_cost',        sortorder:'desc',        viewrecords: true,        caption:"交易明细",        autowidth: true, //自动匹配宽度        height: 300,        prmNames : {            rows:"limit" // 表示请求行数的参数名称        },        loadComplete:function(data){ //完成服务器请求后，回调函数            $("p.nodata").remove();            $("#del_btn").removeAttr("disabled");        },        loadError:function(xhr,status,error){            $("p").appendTo($("#list")).addClass("nodata").html("查询结果为空！");            $("#del_btn").attr("disabled",true);        }    });    $(function(){        $("#find_btn").click(function(){            var obj = {};            $(".query_input").each(function(){                var key = $(this).attr('_id');                var value = $(this).val();                obj[key] = value;            });            $("#list").jqGrid('setGridParam',{                url:"/deal/items/"+"!{deal_id}",                postData:obj,                page:1            }).trigger("reloadGrid");        });        $("#back_btn").click(function(){            window.location.href='/deals';        });    });});