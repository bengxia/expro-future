!=partial('stores/sidebar')//以下是JQuery ui的jsscript(type='text/javascript', src='/libs/jquery-jquery-ui-c1dc191/ui/jquery.ui.core.js')script(type='text/javascript', src='/libs/jquery-jquery-ui-c1dc191/ui/jquery.ui.widget.js')script(type='text/javascript', src='/libs/jquery-jquery-ui-c1dc191/ui/jquery.ui.datepicker.js')script(type='text/javascript', src='/libs/jquery-jquery-ui-c1dc191/ui//i18n/jquery.ui.datepicker-zh-CN.js')//以下是一个jqGrid+fancybox的解决方案jsscript(type='text/javascript', src='/libs/jqGrid_fancybox/js/i18n/grid.locale-cn.js')script(type='text/javascript', src='/libs/jqGrid_fancybox/js/jquery.jqGrid.min.js')script(type='text/javascript', src='/libs/jqGrid_fancybox/js/jquery.fancybox.js')script(type='text/javascript', src='/libs/jqGrid_fancybox/js/jquery.form.js')script(type='text/javascript', src='/libs/jqGrid_fancybox/js/jquery.message.js')style    select, input[type="file"] {        height: 18px;        line-height: 28px;    }#content  .panel    .header      ul.breadcrumb        li          a(href='/') 主页          span.divider /        li          a(href='/deal/index') 交易管理          span.divider /        li.active 交易明细    table(border='0', width='100%')        tr            td                form                    table(border='0', width='100%')                        ////////////////////////增删改查区域Start                        tr                            td(width='100%', align='left', valign='baseline', colspan=4)                                #page_operate(style='visibility:none;')                                    input#back_btn.btn(type='button', value='返 回')                        ////////////////////////增删改查区域End                        ////////////////////////查询条件自动生成 Start                        isOne = 0;                        i = 0;                        //此处处理只有一个查询条件时的布局                        each val, key in queryInput                            - isOne++;                        each val, key in queryInput                            if(isOne == 1)                                tr                                    td(width='10%', align='right', valign='top')                                        label(style="display:block;float:right;font-weight: bold") #{val}：                                    td(width='90%', align='left', valign='top', colspan=3)                                        input.query_input(id='#{key}', type='text')                            else                                if(i%2==0)                                    tr                                - i++;                                td(width='15%', align='right', valign='top')                                    label(style="display:block;float:right;font-weight: bold") #{val}：                                td(width='35%', align='left', valign='top')                                    input.query_input(id='#{key}', type='text')                        tr                            td(width='100%', align='left', valign='top', colspan=4)                                #page_query(style='visibility:none;')                                    input#find_btn.btn(type='button', value='查 询')                                    input#reset_btn.btn(type='reset', value='重 置')                        ////////////////////////查询条件自动生成 End        tr            td                .inner                    table#list                    #pager                    .cl.crscript(type='text/javascript')    jQuery("#list").jqGrid({        url:"/deal/items/"+"!{deal_id}",        datatype: "json",        mtype: 'GET',        colNames:!{JSON.stringify(colNames)},        colModel:!{JSON.stringify(colModel)},//由后台control中获得显示数据        gridview:true, //加速显示        multiselect: true,  //可多选，出现多选框        multiselectWidth: 25, //设置多选列宽度        rowNum:10,        rowList:[10,20,30],        pager: '#pager',        sortname: 'total_cost',        sortorder:'desc',        viewrecords: true,        caption:"员工列表",        autowidth: true, //自动匹配宽度        height: 300,        editurl:"/deal/items/"+"!{deal_id}",        loadComplete:function(data){ //完成服务器请求后，回调函数          if(data.records == undefined){ //如果没有记录返回，追加提示信息，删除按钮不可用              $("p").appendTo($("#list")).addClass("nodata").html('找不到相关数据！');              $("#del_btn").attr("disabled",true);          }else{ //否则，删除提示，删除按钮可用              $("p.nodata").remove();              $("#del_btn").removeAttr("disabled");          }        },        loadError:function(xhr,status,error){            $("p").appendTo($("#list")).addClass("nodata").html('找不到相关数据！');            $("#del_btn").attr("disabled",true);        }    });    $(function(){        $("#find_btn").click(function(){            var obj = {};            $(".query_input").each(function(){                var key = $(this).attr('id');                var value = $(this).val();                obj[key] = value;            });            $("#list").jqGrid('setGridParam',{                url:"/deal/items/"+"!{deal_id}",                postData:obj,                page:1            }).trigger("reloadGrid");        });        $("#back_btn").click(function(){            window.location.href='/deal/index';        });    });